<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Add To Your Network | Care Circles</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="assets/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="/assets/css/circles.css">
  </head>
  <body>
    <div class="container">
      <h2>Add family, friends and neighbors to your circles!</h2>
      <div class="panel-body">
        <p class="explanation">This is your settings page, use it to confirm of mofidy the permissions you want to grant to each circle. You can come back later to change this at any time</p>
      </div>
      <div class="row">
        <div class="col-md-6">
          <h2>My Circles</h2>
          <div class="circles-box">
            <div class="extended-circle">
              <div class="outer-circle">
                <div class="inner-circle inner-color">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <h2 id="circle-panel-header">Members of My Inner Circle</h2>
          <a href="" class="site-btn" id="add-member-btn">Add Someone to My Inner Circle</a>
          <div class="modal fade" id="add-member" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
                  <h2 class="modal-title">Add Member</h2>
                </div>
                <div class="modal-body">
                  <form id="new-member-form" class="form" action="/circlemembers/inner" role="form" method="POST" >
                    <div class="form-group">
                      <label for="name">Name</label>
                      <input class="form-control" type="text" name="name" placeholder="" required="required">
                    </div>
                    <div class="form-group">
                      <label for="phone">Phone</label>
                      <input class="form-control" type="text" name="phone" placeholder="" required="required">
                    </div>
                    <div class="form-group">
                      <label for="email">Email</label>
                      <input class="form-control" type="text" name="email" placeholder="" required="required">
                    </div>
                    <div class="form-group">
                      <label for="relationship">Relationship</label>
                      <input class="form-control" type="text" name="relationship" placeholder="">
                    </div>
                    <div class="modal-footer">
                      <button id="submit-member-btn" type="submit" class="btn btn-default">Add New Member</button>
                    </div>
                  </form>
                </div>

              </div><!-- .modal-content -->
            </div><!-- .modal-dialog -->
          </div><!-- .modal -->
          <div id='cards' class="cards">
            <div class="card">
                <div class="card-img"><img src="assets/img/02.jpg" alt="user" class="img-circle"></div>
                <div class="card-content">
                  <div class="card-name">Susie Gartner</div>
                  <div class="card-rel">My Daughter</div>
                  <hr>
                  <p>Phone:</p>
                  <p>Email:</p>
                </div>
            </div>
          </div>
          <div class="next">
            <button id="nextbutton" class="btn btn-default">Next</button>
          </div>

        </div>
      </div>
    </div>
  </body>
  <footer>
    <script src="assets/js/jquery-2.1.4.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <!--<script src="assets/js/main.js"></script>-->
    <!--<script src="assets/js/owl.carousel.min.js"></script>-->
    <script type="text/javascript">

    var card = '<div class="card"> \
       <div class="card-body"> \
         <div class="card-img"> \
           <img src="assets/img/02.jpg" alt="user" class="img-circle"> \
         </div> \
         <div class="card-content"> \
           <h3 class="card-name"></h3> \
           <p class="card-phone">Phone:</p> \
           <p class="card-email">Email:</p> \
           <p class="card-relationship">Relationship:</p> \
         </div> \
       </div> \
       <div class="card-footer"> \
         <a href="" class="site-btn" id="edit-member">Edit</a> \
       </div> \
     </div>';

      $(document).ready(function(){
        var circle = 1;

        $("#add-member-btn").click(function(e){
          e.preventDefault();
          console.log("test");
            $("#add-member").modal();
        });

        $("#submit-member-btn").click(function(e){
          e.preventDefault();
          console.log("submit member button pressed");

          var urlPath = "";
          if (circle == 1){
            urlPath = '/circlemembers/inner';
          } else if (circle == 2){
            urlPath = '/circlemembers/outer';
          } else if (circle == 3){
            urlPath = '/circlemembers/extended';
          }

          var nameVal = $("input[name=name]").val();
          var phoneVal = $("input[name=phone]").val();
          var emailVal = $("input[name=email]").val();
          var relationshipVal = $("input[name=relationship]").val();

          $.ajax({
            type: "POST",
            url: urlPath,
            data: {
              name: nameVal,
              phone: phoneVal,
              email: emailVal,
              relationship: relationshipVal
            },
            success: function(result) {
              $("#new-member-form")[0].reset();
              $("#add-member").modal('hide');
              //$("form.form").reset();
              $("#cards").append(card);
              $(".card-name").last().append(nameVal);
              $(".card-phone").last().append(phoneVal);
              $(".card-email").last().append(emailVal);
              $(".card-relationship").last().append(relationshipVal);
              //window.location.href = "permissions.html";
            },
            error: function(result) {
              alert('error');
            }
          });
        });


        $("#nextbutton").click(function(e){
          console.log("nextbutton");
          if (circle == 1){
            $(".inner-circle").removeClass("inner-color");
            $(".outer-circle").addClass("outer-color");
            $("#cards").empty();
            $("#circle-panel-header").text("Members of My Outer Circle");
            circle++;
          } else if (circle == 2){
            $(".outer-circle").removeClass("outer-color");
            $(".extended-circle").addClass("extended-color");
            $("#cards").empty();
            $("#circle-panel-header").text("Members of My Extended Circle");
            circle++
          } else if (circle == 3){
            window.location.href = 'summary.html';
          }
          e.preventDefault();
        });

      });
    </script>
    <script>

    </script>
  </footer>
</html>
